{% extends "layout.html" %}

{% block title %}
My Tickets
{% endblock %}

{% block main %}
<div class="mt-sm-1">
    <div class='justify-content-center align-items-center'>
        <p class='h1'>My Open Tickets</p>
    </div>
    {% if open_tickets %}
    <table class="table table-striped table-hover" id='table1'>
        <thead>
            <tr>
                <th onclick="sortTable(0)">ID</th>
                <th onclick='sortTable(1)'>Category</th>
                <th onclick='sortTable(2)'>Subject</th>
                <th onclick='sortTable(3)'>Description</th>
                <th onclick='sortTable(4)'>Submitted By</th>
                <th onclick='sortTable(5)'>Date Created</th>
                <th onclick='sortTable(6)'>Status</th>
                <th onclick='sortTable(7)'>Date Closed</th>
                <th>Update Ticket</th>
            </tr>
        </thead>
        <tbody>
            {% for i in open_tickets %}
            <tr id="open_ticket_{{i.id}}">
                <td>{{ i.issue_id }}</td>
                <td>{{ i.issue_category }}</td>
                <td>{{ i.issue_subject }}</td>
                <td>{{ i.issue_description }}</td>
                <td>{{ i.submitter_id }}</td>
                <td>{{ i.date_created }}</td>
                <td>{{ i.issue_status }}</td>
                <td>{{ i.date_closed }}</td>
                <td><button onclick="window.location.href='/mytickets?id={{i.issue_id}}'">Update</button></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>
<div class="mt-sm-1">
    <div class='justify-content-center align-items-center'>
        <p class='h1'>My Closed Tickets</p>
    </div>
    {% if closed_tickets %}
    <table class="table table-striped table-hover" id='table2'>
        <thead>
            <tr>
                <th onclick="sortTable(0)">ID</th>
                <th onclick='sortTable(1)'>Category</th>
                <th onclick='sortTable(2)'>Subject</th>
                <th onclick='sortTable(3)'>Description</th>
                <th onclick='sortTable(4)'>Submitted By</th>
                <th onclick='sortTable(5)'>Date Created</th>
                <th onclick='sortTable(6)'>Status</th>
                <th onclick='sortTable(7)'>Date Closed</th>
                <th>Update Ticket</th>
            </tr>
        </thead>
        <tbody>
            {% for i in closed_tickets %}
            <tr id="closed_ticket_{{i.id}}">
                <td>{{ i.issue_id }}</td>
                <td>{{ i.issue_category }}</td>
                <td>{{ i.issue_subject }}</td>
                <td>{{ i.issue_description }}</td>
                <td>{{ i.submitter_id }}</td>
                <td>{{ i.date_created }}</td>
                <td>{{ i.issue_status }}</td>
                <td>{{ i.date_closed }}</td>
                <td><button onclick="window.location.href='/mytickets?id={{i.issue_id}}'">Update</button></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>
{% endblock %}
{% block script %}
{% endblock %}
