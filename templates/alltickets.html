{% extends "layout.html" %}

{% block title %}
All Tickets
{% endblock %}

{% block main %}
<div class="mt-sm-1">
    <div class='justify-content-center align-items-center'>
        <p class='h1'>All Tickets</p>
    </div>
        <table class="table table-striped table-hover" id='table1'>
        <thead>
            <tr>
                <th onclick="sortTable(0)">ID</th>
                <th onclick='sortTable(1)'>Category</th>
                <th onclick='sortTable(2)'>Subject</th>
                <th onclick='sortTable(3)'>Description</th>
                <th onclick='sortTable(4)'>Submitted By</th>
                <th onclick='sortTable(5)'>Assigned To</th>
                <th onclick='sortTable(6)'>Date Created</th>
                <th onclick='sortTable(7)'>Status</th>
                <th onclick='sortTable(8)'>Date Closed</th>
                <th>Update Ticket</th>
            </tr>
        </thead>
        <tbody>
            {% for i in tickets %}
            <tr id="open_ticket_{{i.id}}">
                <td>{{ i.issue_id }}</td>
                <td>{{ i.issue_category }}</td>
                <td>{{ i.issue_subject }}</td>
                <td>{{ i.issue_description }}</td>
                <td>{{ i.submitter_id }}</td>
                <td>{{ i.user_assigned_to }}</td>
                <td>{{ i.date_created }}</td>
                <td>{{ i.issue_status }}</td>
                <td>{{ i.date_closed }}</td>
                <td><button onclick="window.location.href='./alltickets?id={{i.issue_id}}'">History</button></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
{% block script %}
{% endblock %}
