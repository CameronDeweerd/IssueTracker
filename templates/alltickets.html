{% extends "layout.html" %}

{% block title %}
All Tickets
{% endblock %}

{% block main %}
<div class="mt-sm-1">
    <div class='justify-content-center align-items-center'>
        <p class='h1'>All Tickets</p>
    </div>
    <table class="table table-striped table-hover" id='table1'>
        <thead>
            <tr>
                <th onclick="sortTable(0)">ID</th>
                <th onclick='sortTable(1)'>Category</th>
                <th onclick='sortTable(2)'>Subject</th>
                <th onclick='sortTable(3)'>Description</th>
                <th onclick='sortTable(4)'>Submitted By</th>
                <th onclick='sortTable(5)'>Date Created</th>
                <th onclick='sortTable(6)'>Status</th>
                <th onclick='sortTable(7)'>Date Closed</th>
                <th>Assign Ticket</th>
            </tr>
        </thead>
        <tbody>
            {% for i in tickets %}
            <tr id="ticket_{{i.id}}">
                <td>{{ i.issue_id }}</td>
                <td>{{ i.issue_category }}</td>
                <td>{{ i.issue_subject }}</td>
                <td>{{ i.issue_description }}</td>
                <td>{{ i.submitter_id }}</td>
                <td>{{ i.date_created }}</td>
                <td>{{ i.issue_status }}</td>
                <td>{{ i['Date Closed'] }}</td>
                <td>
                    <form action="/assigntickets" method="post">
                        <input type="text" name='issueID' value='{{ i.issue_id }}' hidden>
                        <label for="select{{ i.issue_id }}"></label>
                        <select name="people" id="select{{ i.issue_id }}">
                            <option value="">--Please Choose User--</option>
                            {% for user in users %}
                            <option value="{{ user.Username }}">{{ user.Username }}, {{ user.Access }}</option>
                            {% endfor %}
                        </select>
                        <button type='submit' class='btn btn-primary'>Assign</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
{% block script %}
{% endblock %}